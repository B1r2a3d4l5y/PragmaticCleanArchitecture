@page "/user-editor"
@inject NavigationManager Navigation
@inject IUsersClient UsersClient

<h3>User Editor</h3>

@if (Model == null)
{
    <p>Loading...</p>
}
else
{
    <EditForm Model="Model.User">
        <DataAnnotationsValidator />
        <ValidationSummary />

        <div>
            <label>Username:</label>
            <InputText @bind-Value="Model.User.Name" />
        </div>
        <div>
            <label>Email:</label>
            <InputText @bind-Value="Model.User.Email" />
        </div>
        <div>
            <label>Roles:</label>
            @foreach (var role in Model.AllRoles)
            {
                var isChecked = Model.User.Roles.Contains(role);
                <div class="form-check">
                    <InputCheckbox class="form-check-input" id="@($"role-{role}")" Value="@isChecked" ValueExpression="() => isChecked" ValueChanged="@(e => ToggleSelectedRole(role))" />
                    <label class="form-check-label" for="@($"role-{role}")">
                        @role
                    </label>
                </div>
            }
        </div>
    </EditForm>
}
